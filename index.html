<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>bit::memory: `bit::memory` Memory library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">bit::memory
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">`bit::memory` Memory library </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a href="https://travis-ci.org/bitwizeshift/bit-memory"></a> <a href="https://ci.appveyor.com/project/bitwizeshift/bit-memory"></a> <a href="http://github.com/bitwizeshift/bit-memory/issues"></a> <a href="#tested-compilers"></a> <a href="http://bitwizeshift.github.io/bit-memory"></a> https://github.com/bitwizeshift/bit-memory/blob/master/LICENSE.md "![GitHub License](https://img.shields.io/badge/license-MIT-blue.svg)" <a href="https://github.com/bitwizeshift/bit-memory/releases"></a></p>
<h2>What is <code>bit::memory</code>?</h2>
<p>This is an all-purpose memory management library. The primary emphasis on this library revolves around the memory allocators in the library, designed to be as lightweight and efficient as possible. Custom C++ <em>logical</em> concepts are designed and adhered to strictly within this library. Sadly these are not (yet) <code>C++20</code> or <code>C++ Concepts TS</code> concepts since they are not standardized.</p>
<p>Additionally, this library offers utilities for the following concerns:</p>
<ul>
<li>Standard Adapters: Adapter functionality between this library's <code>Allocator</code> concepts and the C++ standard library Allocator</li>
<li>Endianness: Detects host machine endianness, and offers casting with <code>endian_cast</code> and <code>endian_swap</code> utilities</li>
<li>Unaligned Access: Utilities for loading unaligned data in a standard-compliant manner</li>
<li>Virtual Memory: Functionality for reserving and committing virtual memory pages in a cross-platform way (MacOS,Linux, and Windows)</li>
<li>Aligned Memory: Functionality for allocating over-aligned memory</li>
</ul>
<p>This library defines a variety of <code>BlockAllocator</code>s and <code>Allocator</code>s &ndash; and is extendable through user-defined custom types that conform to the concepts defined here.</p>
<h2>Differences from Standard Allocators</h2>
<p>The <code>Allocator</code> concept in this library differs from the C++ standard's allocators in a few ways</p>
<h3>1. Allocators are heterogeneous</h3>
<p>The C++ Standard Library's <code>Allocator</code> concept defines every <code>Allocator</code> to be homogeneous in its allocations; always allocating a specific type <code>T</code>, and only converting to different allocators using <code>rebind</code>. This offers some level of optimizations, since all allocations are of fixed size; but also can cause large amounts of code duplication due to the requirement of templates to produce different instances of the same type, all based on type <code>T</code>.</p>
<p>As a result, this library uses the SGI and HP approach of only allocating by <code>void*</code>, rather than by a given type. A wrapper type called <code>std_allocator_wrapper</code> exists to wrap the given allocator in a manner that works with C++ standard containers.</p>
<h3>2. Allocators support alignment</h3>
<p>Since the C++ Standard Library's <code>Allocator</code> only cares about the type <code>T</code> being allocated, there is no generalized support for over-aligning types.</p>
<p>The <code>Allocator</code> concept in this library <em>requires</em> the presence of an alignment argument in order to work properly (although this argument may be ignored in certain implementations).</p>
<h3>3. Allocators require <code>try_allocate</code> rather than <code>allocate</code></h3>
<p>This is a subtle difference. The C++ Standard Library's <code>allocate(...)</code> function is free to throw exceptions on failure; leaving non-throwing allocators up to an implementation's discretion. The <code>Allocator</code> concept in this library requires <code>try_allocate</code>, which may return a null pointer on failure and must be non-throwing.</p>
<p>This allows for greater composition with other allocators, since an allocator that fails to allocate can be queried without requiring <code>try</code>/<code>catch</code> statements (e.g. for fallback allocators)</p>
<p>The optional <code>allocate</code> function <em>may</em> throw. If this is not defined, then <code>allocator_traits&lt;Allocator&gt;::allocate(...)</code> defines a custom one that &ndash; on failure &ndash; calls a global out-of-memory handler.</p>
<h3>4. Allocator info</h3>
<p>The Allocator concept in this library optionally supports a member function named <code>info()</code> that returns an <code>allocator_info</code> object. This object is used for <em>naming</em> the allocator so that it can be uniquely identified in case an error handler is called.</p>
<h2>Using <code>bit::memory</code></h2>
<h3>Building &amp; Installing</h3>
<p>Building <code>bit::memory</code> is simple, and only requires a CMake version greater than 3.1, and a compatible compiler.</p>
<p>Fist, make a directory to build the library in, then build with CMake</p>
<div class="fragment"><div class="line">mkdir build</div><div class="line">cd build</div><div class="line"></div><div class="line">cmake . -DBIT_MEMORY_BUILD_UNIT_TESTS=Off -DBIT_MEMORY_BUILD_INDEPENDENCE_TESTS=Off  # ... any additional toolchain parameters ...</div><div class="line">cmake --build .</div></div><!-- fragment --><p>Omitting the <code>-DBIT_MEMORY_BUILD_UNIT_TESTS=Off</code> will build unit tests; likewise <code>DBIT_MEMORY_BUILD_INDEPENDENCE_TESTS=Off</code> will build header-independence checks (building each header independently to ensure there are no header-order based transitive dependencies).</p>
<p>To install, run:</p>
<div class="fragment"><div class="line">cmake --build . --target install</div></div><!-- fragment --><p>To change the output directory of the installation, you can export <code>BIT_HOME</code> to install to a specific directory</p>
<div class="fragment"><div class="line">export BIT_HOME=/etc/bit</div><div class="line">cmake --build . --target install</div></div><!-- fragment --><p>will install into <code>/etc/bit/</code>.</p>
<h3>Through a <code>cmake</code> subdirectory</h3>
<p>Clone/copy/subtree the contents of this repository to a subdirectory, and <code>add_subdirectory</code> the directory containing <code>bit::memory</code>.</p>
<p>To add a dependency to the library, just add <code>target_link_libraries(&lt;your target&gt; [PUBLIC|INTERFACE|PRIVATE] bit::memory)</code></p>
<h2><a class="anchor" id="tested-compilers"></a>Tested Compilers</h2>
<p>The following compilers are currently being tested through continuous integration with <a href="https://travis-ci.org/bitwizeshift/bit-memory">Travis</a> and <a href="https://ci.appveyor.com/project/bitwizeshift/bit-memory/">AppVeyor</a></p>
<p>Note that <code>bit-memory</code> only works on compiler that provide proper conformance for c++14</p>
<table class="doxtable">
<tr>
<th>Compiler </th><th>Operating System  </th></tr>
<tr>
<td>g++ 6.3.0 </td><td>Ubuntu 14.04.3 TLS </td></tr>
<tr>
<td>g++ 7.2.0 </td><td>Ubuntu 14.04.3 TLS </td></tr>
<tr>
<td>clang++ 3.9.0 </td><td>Ubuntu 14.04.3 TLS </td></tr>
<tr>
<td>clang++ 4.0.1 </td><td>Ubuntu 14.04.3 TLS </td></tr>
<tr>
<td>clang++ 5.0 </td><td>Ubuntu 14.04.3 TLS </td></tr>
<tr>
<td>g++ 7.2.0 </td><td>Ubuntu 14.04.3 TLS </td></tr>
<tr>
<td>clang xcode 7.3 </td><td>Darwin Kernel 15.6.0 (OSX 10.11.6) </td></tr>
<tr>
<td>clang xcode 8.0 </td><td>Darwin Kernel 15.6.0 (OSX 10.11.6) </td></tr>
<tr>
<td>clang xcode 8.1 </td><td>Darwin Kernel 16.1.0 (OSX 10.12.1) </td></tr>
<tr>
<td>clang xcode 8.2 </td><td>Darwin Kernel 16.1.0 (OSX 10.12.1) </td></tr>
<tr>
<td>clang xcode 8.3 </td><td>Darwin Kernel 16.6.0 (OSX 10.12.5) </td></tr>
<tr>
<td>clang xcode 9.0 </td><td>Darwin Kernel 16.7.0 (OSX 10.12.6) </td></tr>
<tr>
<td>Visual Studio 2017 </td><td>Windows Server 2016 (x64) </td></tr>
</table>
<p><b>Note:</b> Unfortunately, support for Visual Studio 2015 had to be dropped due to issues properly performing SFINAE with some non-owning type-erased classes (<code>any_allocator</code> and <code>any_block_allocator</code>). It has just not been worth the hassle to attempt to support a non-standards-conforming compiler. Fortunately, Visual Studios 2017 is still supported, and will continue to be.</p>
<h2><a class="anchor" id="license"></a>License</h2>
<div class="image">
<img src="http://opensource.org/trademarks/opensource/OSI-Approved-License-100x137.png" align="right"/>
</div>
<p>The class is licensed under the <a href="http://opensource.org/licenses/MIT">MIT License</a>:</p>
<p>Copyright &copy; 2018 Matthew Rodusek</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE. </p>
</div></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
